<%- include('../partials/header') %>
<%- include('../partials/nav_bar') %>
<main class="container column-layout">
<% let time1 = ''; %>
<% let time2 = ''; %>
<% let status = ''; %>
<% let img_time1 = ''; %>
<% let img_time2 = ''; %>
<% boloesList.forEach(bolao => { %>     
    <% bolao.jogos.forEach(jogo => { %> 
        <% if(jogo._id == jogoID) {  %>
            <% time1 = jogo.time1; %>
            <% time2 = jogo.time2; %>
            <% status = jogo.status; %>
            <% } %>
        <% bolao.times.forEach(time => { %>
        <% if(time.name == time1) { %>
        <% img_time1 = time.img; %>
        <% } %> 
        <% if(time.name == time2) { %>
        <% img_time2 = time.img; %>
        <% } %> 
        <% }); %>           

    <% }); %>
<% }); %>


<h1>PALPITES</h1>      
      
      <h5> Status: <b> <%= status  %> </b></h5>
      <table id='table' class="table table-hover">
          <thead>
              <tr>   
              <th scope='col'>Nome</th>
              <th scope="col">Apelido</th>
              <th scope="col">Time Mandante</th>
              <th scope="col"></th>
              <th scope="col"> </th>              
              <th scope="col">x</th>
              <th scope="col"> </th>
              <th scope="col"> </th>              
              <th scope="col">Time Visitante </th>
              <th scope="col">Pontos Ganhos</th>
              </tr>
          </thead>
                    
            <tbody>
            <% palpites.forEach(palpite => { %>                          
                <% userList.forEach(user => { %>
                    <% if(palpite.userID == user._id) { %>   
                    <tr>                        
                        <td style='text-align:center;vertical-align:middle'><%= user.name %></td>
                        <td style='text-align:center;vertical-align:middle'><%= user.apelido %></td> 
                        <td style='text-align:center;vertical-align:middle'><%= time1 %></td>
                        <td style='text-align:center;vertical-align:middle'><img src="<%= img_time1 %>" class="rounded-circle" alt="" style="object-fit:cover;
            width:50px;
            height:50px;
            border: none"/></td>
                        <td style='text-align:center;vertical-align:middle'><%= palpite.resultado_time1 %></td>                         
                        <td style='text-align:center;vertical-align:middle'>x</td>
                        <td style='text-align:center;vertical-align:middle'><%= palpite.resultado_time2 %></td>
                        <td style='text-align:center;vertical-align:middle'><img src="<%= img_time2 %>" class="rounded-circle" alt="" style="object-fit:cover;
            width:50px;
            height:50px;
            border: none"/></td>
                        <td style='text-align:center;vertical-align:middle'><%= time2 %></td>
                        <td style='text-align:center;vertical-align:middle'>
                        <% pontuacao.forEach(pontos => { %>
                            <% if(pontos.user == user._id) { %>
                                <%= pontos.pontos %>
                            <% } %>
                            
                        <% }); %>
                        </td>                        
                    </tr>
                    <% } %>
                    <% }); %>
                    <% }); %>                   
                </tbody>
                </table>
</main>

  <%- include('../partials/bottom_nav') %>
  <%- include('../partials/footer') %>